<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Sensor</title>
	<script type='text/javascript' src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
		integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
		integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
		integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
		crossorigin="anonymous"></script>
</head>

<body>
	<div class="col-md-3">
		<form>
			<h1>Datos temperatura</h1>
			<label for="Tmax">Temperatura máxima:</label><br>
			<input type="text" id="Tmax" name="Tmax" value="20"><br>
			<label for="Tmin">Temperatura mínima:</label><br>
			<input type="text" id="Tmin" name="Tmin" value="5"><br><br>
			<input type="button" onclick="actualizaTemperatura()" value="Actualizar temperatura">
		</form>
	</div>
	<div class="col-md-3">
		<form>
			<h1>Datos luminosidad</h1>
			<label for="Lmax">Luminosidad máxima:</label><br>
			<input type="text" id="Lmax" name="Lmax" value="32"><br>
			<label for="Lmin">Luminosidad mínima:</label><br>
			<input type="text" id="Lmin" name="Lmin" value="2"><br><br>
			<input type="button" onclick="actualizaLuminosidad()" value="Actualizar luminosidad">
		</form>
	</div>

	<!-- <input type="button" onclick="resetearBD()" value="Resetear BD de Mongo"></button> -->

</body>

<script src="/socket.io/socket.io.js"></script>
<script type="text/javascript">
	var serviceURL = document.URL;
	var socket = io.connect(serviceURL);

	function actualizaTemperatura() {
		var d = new Date();
		var min = document.getElementById("Tmin").value;
		var max = document.getElementById("Tmax").value;

		socket.emit('nueva_temperatura',
			{
				tmin: min,
				tmax: max,
				Time: d,
				Tipo: "temperatura"
			}
		);
		alert('Temperatura actualizada');
	}

	function actualizaLuminosidad() {
		var d = new Date();
		var min = document.getElementById("Lmin").value;
		var max = document.getElementById("Lmax").value;

		socket.emit('nueva_luminosidad',
			{
				lmin: min,
				lmax: max,
				Time: d,
				Tipo: "luminosidad"
			}
		);
		alert('Luminosidad actualizada');
	}

	function resetearBD() {
		alert('Se va a borrar la base de datos');
		socket.emit('reset');

		window.location = "http://localhost:8000";
	}

	// Obtenemos los datos de la BD
		var datos = []
		socket.emit('obtener',datos)
		console.log(datos);
	//
</script>

</html>