<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="refresh" content="10">
    <title>Usuario</title>
    <script type='text/javascript' src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>
    <h1 style="padding-left: 1.2%">Usuario</h1>
    <div class="row">
        <div class="col-sm-5 col-md-3" style="padding-left:2%">
            <div class="card text-white bg-danger mb-3" style="max-width: 18rem;">
                <div class="card-header">
                    <p style="text-align: center">Temperatura</p>
                    <img src="./img/temperatura.png" class="img-fluid" alt="Responsive image" width="200" style="padding-left: 3em;">
                </div>
                <div class="card-body">
                    <h5 class="card-title" id="temp_max">
                        Temperatura maxima: 
                    </h5>
                    <h5 class="card-title" id="temp_min">
                        Temperatura m√≠nima:
                    </h5>
                </div>
            </div>
        </div>
        <div class="col-sm-5 col-md-3">
            <div class="card text-white bg-warning mb-3" style="max-width: 18rem;">
                <div class="card-header" style="height: 13.5em;">
                    <p style="text-align: center;">Luminosidad</p>
                    <img src="./img/luminosidad.png" class="img-fluid" alt="Responsive image">
                </div>
                <div class="card-body">
                    <h5 class="card-title" id="lum_max">
                        Luminosidad maxima:
                    </h5>
                    <h5 class="card-title" id="lum_min">
                        Luminosidad minima: 
                    </h5>
                </div>
            </div>
        </div>
    </div>
</body>

<script src="/socket.io/socket.io.js"></script>
<script type="text/javascript">
    // var serviceURL = document.URL;
    var serviceURL = "http://localhost:8000/";
    var socket = io.connect(serviceURL);

    // Obtenemos los datos de la BD
    socket.emit('obtener');
    socket.on('obtener', function (data) {
        data.forEach(function (sensor) {
            if (sensor.Tipo == "temperatura") {
                console.log("Temperatura")
                console.log("Minimo: " + sensor.tmin + "  Maximo: " + sensor.tmax);

                document.getElementById("temp_max").innerHTML = "Temperatura maxima: " + sensor.tmax;
                document.getElementById("temp_min").innerHTML = "Temperatura minima: " + sensor.tmin;
            } else if (sensor.Tipo == "luminosidad") {
                console.log("Luminosidad")
                console.log("Minimo: " + sensor.lmin + "  Maximo: " + sensor.lmax);

                document.getElementById("lum_max").innerHTML = "Luminosidad maxima: " + sensor.lmax;
                document.getElementById("lum_min").innerHTML = "Luminosidad minima: " + sensor.lmin;
            }
        });
    });
    //
</script>


</html>